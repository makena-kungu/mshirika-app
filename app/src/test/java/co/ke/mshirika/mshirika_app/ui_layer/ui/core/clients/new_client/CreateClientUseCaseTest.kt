package co.ke.mshirika.mshirika_app.ui_layer.ui.core.clients.new_client

import co.ke.mshirika.mshirika_app.data_layer.datasource.models.response.templates.client.ClientTemplate
import co.ke.mshirika.mshirika_app.ui_layer.ui.core.clients.new_client.content.FamilyMember
import co.ke.mshirika.mshirika_app.ui_layer.ui.core.clients.new_client.content.GeneralData
import com.google.gson.Gson
import kotlinx.coroutines.runBlocking
import org.junit.Before
import org.junit.Test

class CreateClientUseCaseTest {
    private val today = System.currentTimeMillis()
    private lateinit var useCase: CreateClientUseCase

    @Before
    fun setUp() {
        //useCase = CreateClientUseCase(ClientsRepoImplTest())
    }

    @Test
    fun `testing that client use case creates a client correctly`() {
        val clientTemplate: ClientTemplate = Gson().fromJson(TEMPLATE, ClientTemplate::class.java)

        runBlocking {
            val outcome = useCase(
                general = generalData,
                template = clientTemplate,
                familyMembers = listOf(fam)
            )
            println("outcome = $outcome")
        }
    }

    private val generalData = GeneralData(
        firstName = "John",
        middleName = "Doe",
        lastName = "Junior ${('A'..'Z').random()}${('A'..'Z').random()}",
        dob = today,
        memNo = "DS${('A'..'Z').random()}-423${(10..99).random()}",
        mobileNo = "+2547${(10_000_000..99_999_999).random()}",
        gender = true,
        isStaff = false,
        savingsAccount = "Liquidation Account",
        clientType = "Member",
        clientClassification = "Catholic",
        submitDate = today,
        nationalId = "${(90342..329486).random()}",
        email = "someone@email.com"//,
        //activationDate.s.fromShortDate
    )

    private val fam = FamilyMember(
        name = "John Doe Sn",
        dob = 0,
        relationship = 83,
        gender = 33,
        maritalStatus = 170
    )

    private val TEMPLATE: String =
        "{\"activationDate\":[2022,5,12],\"isStaff\":false,\"officeId\":143,\"officeOptions\":[{\"id\":143,\"name\":\"Demo Office\",\"nameDecorated\":\"........Demo Office\"}],\"staffOptions\":[{\"id\":764,\"firstname\":\"greeshma\",\"lastname\":\"a\",\"displayName\":\"a, greeshma\",\"officeId\":1,\"officeName\":\"Head Office\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":562,\"firstname\":\"Sughosh\",\"lastname\":\"Bharadwaj\",\"displayName\":\"Bharadwaj, Sughosh\",\"officeId\":1,\"officeName\":\"Head Office\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":104,\"firstname\":\"Data\",\"lastname\":\"Cleark\",\"displayName\":\"Cleark, Data\",\"officeId\":1,\"officeName\":\"Head Office\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":768,\"firstname\":\"sumit\",\"lastname\":\"conf\",\"displayName\":\"conf, sumit\",\"officeId\":1,\"officeName\":\"Head Office\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":566,\"firstname\":\"ashok\",\"lastname\":\"conflux\",\"displayName\":\"conflux, ashok\",\"officeId\":1,\"officeName\":\"Head Office\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":491,\"firstname\":\"Kiran\",\"lastname\":\"conflux\",\"displayName\":\"conflux, Kiran\",\"officeId\":1,\"officeName\":\"Head Office\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":436,\"firstname\":\"Anne\",\"lastname\":\"Gatere\",\"displayName\":\"Gatere, Anne\",\"officeId\":1,\"officeName\":\"Head Office\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":232,\"firstname\":\"Ann\",\"lastname\":\"Gatere\",\"displayName\":\"Gatere, Ann\",\"officeId\":1,\"officeName\":\"Head Office\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":127,\"firstname\":\"Eric\",\"lastname\":\"Gichobi\",\"displayName\":\"Gichobi, Eric\",\"officeId\":1,\"officeName\":\"Head Office\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":321,\"firstname\":\"John\",\"lastname\":\"Gichomo\",\"displayName\":\"Gichomo, John\",\"officeId\":1,\"officeName\":\"Head Office\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":763,\"firstname\":\"raghu\",\"lastname\":\"h\",\"displayName\":\"h, raghu\",\"officeId\":1,\"officeName\":\"Head Office\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":543,\"firstname\":\"shahbaz\",\"lastname\":\"hussain\",\"displayName\":\"hussain, shahbaz\",\"officeId\":1,\"officeName\":\"Head Office\",\"isLoanOfficer\":true,\"isActive\":true},{\"id\":199,\"firstname\":\"EVAN\",\"lastname\":\"KABOI\",\"displayName\":\"KABOI, EVAN\",\"officeId\":1,\"officeName\":\"Head Office\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":162,\"firstname\":\"Michael\",\"lastname\":\"Kiburi\",\"displayName\":\"Kiburi, Michael\",\"officeId\":1,\"officeName\":\"Head Office\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":134,\"firstname\":\"George\",\"lastname\":\"Kihoro\",\"displayName\":\"Kihoro, George\",\"officeId\":58,\"officeName\":\"Self Help Programme\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":517,\"firstname\":\"James\",\"lastname\":\"Kimani\",\"displayName\":\"Kimani, James\",\"officeId\":58,\"officeName\":\"Self Help Programme\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":357,\"firstname\":\"Andrew\",\"lastname\":\"Kimani\",\"displayName\":\"Kimani, Andrew\",\"officeId\":58,\"officeName\":\"Self Help Programme\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":132,\"firstname\":\"Lukas\",\"lastname\":\"Kung\\u0027u\",\"displayName\":\"Kung\\u0027u, Lukas\",\"officeId\":58,\"officeName\":\"Self Help Programme\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":957,\"firstname\":\"Edwin\",\"lastname\":\"Kung\\u0027u\",\"displayName\":\"Wanjiku, Elizabeth\",\"mobileNo\":\"0718016140\",\"officeId\":143,\"officeName\":\"Demo Office\",\"isLoanOfficer\":true,\"isActive\":true,\"joiningDate\":[2021,12,1]},{\"id\":463,\"firstname\":\"tampha\",\"lastname\":\"l\",\"displayName\":\"l, tampha\",\"officeId\":1,\"officeName\":\"Head Office\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":152,\"firstname\":\"caritas\",\"lastname\":\"mpesa\",\"displayName\":\"mpesa, caritas\",\"officeId\":1,\"officeName\":\"Head Office\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":514,\"firstname\":\"Edward\",\"lastname\":\"Muchiri\",\"displayName\":\"Muchiri, Edward\",\"officeId\":58,\"officeName\":\"Self Help Programme\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":516,\"firstname\":\"Redempta\",\"lastname\":\"Muindi\",\"displayName\":\"Muindi, Redempta\",\"officeId\":58,\"officeName\":\"Self Help Programme\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":160,\"firstname\":\"Mary\",\"lastname\":\"Mungai\",\"displayName\":\"Mungai, Mary\",\"officeId\":58,\"officeName\":\"Self Help Programme\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":55,\"firstname\":\"max\",\"lastname\":\"muoki\",\"displayName\":\"Nbi, Caritas\",\"mobileNo\":\"0724667861\",\"officeId\":143,\"officeName\":\"Demo Office\",\"isLoanOfficer\":true,\"isActive\":true,\"joiningDate\":[2021,10,1]},{\"id\":508,\"firstname\":\"Maxwell\",\"lastname\":\"Muoki\",\"displayName\":\"Muoki, Maxwell\",\"officeId\":1,\"officeName\":\"Head Office\",\"isLoanOfficer\":true,\"isActive\":true},{\"id\":507,\"firstname\":\"James\",\"lastname\":\"Muthoga\",\"displayName\":\"Muthoga, James\",\"officeId\":1,\"officeName\":\"Head Office\",\"isLoanOfficer\":true,\"isActive\":true},{\"id\":126,\"firstname\":\"Everlyn\",\"lastname\":\"Mwangi\",\"displayName\":\"Mwangi, Everlyn\",\"officeId\":58,\"officeName\":\"Self Help Programme\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":549,\"firstname\":\"Triza\",\"lastname\":\"Mwaniki\",\"displayName\":\"Mwaniki, Triza\",\"officeId\":1,\"officeName\":\"Head Office\",\"isLoanOfficer\":true,\"isActive\":true},{\"id\":151,\"firstname\":\"ashwath\",\"lastname\":\"narayan\",\"displayName\":\"narayan, ashwath\",\"officeId\":1,\"officeName\":\"Head Office\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":135,\"firstname\":\"John\",\"lastname\":\"Ndichu\",\"displayName\":\"Ndichu, John\",\"officeId\":58,\"officeName\":\"Self Help Programme\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":124,\"firstname\":\"David\",\"lastname\":\"Ndung\\u0027u\",\"displayName\":\"Ndung\\u0027u, David\",\"officeId\":1,\"officeName\":\"Head Office\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":153,\"firstname\":\"David\",\"lastname\":\"Ndungu\",\"displayName\":\"Ndungu, David\",\"officeId\":58,\"officeName\":\"Self Help Programme\",\"isLoanOfficer\":true,\"isActive\":true},{\"id\":271,\"firstname\":\"Ken\",\"lastname\":\"Ng\\u0027ang\\u0027a\",\"displayName\":\"Ng\\u0027ang\\u0027a, Ken\",\"officeId\":1,\"officeName\":\"Head Office\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":962,\"firstname\":\"Alex\",\"lastname\":\"Ngala\",\"displayName\":\"Ngala, Alex\",\"officeId\":58,\"officeName\":\"Self Help Programme\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":117,\"firstname\":\"Francis\",\"lastname\":\"Njenga\",\"displayName\":\"Njenga, Francis\",\"officeId\":58,\"officeName\":\"Self Help Programme\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":128,\"firstname\":\"Benard\",\"lastname\":\"Njuguna\",\"displayName\":\"Njuguna, Benard\",\"officeId\":58,\"officeName\":\"Self Help Programme\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":15,\"firstname\":\"Samuel\",\"lastname\":\"Nyabero\",\"displayName\":\"Nyabero, Samuel\",\"officeId\":58,\"officeName\":\"Self Help Programme\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":123,\"firstname\":\"Moses\",\"lastname\":\"Nyakweba\",\"displayName\":\"Nyakweba, Moses\",\"officeId\":58,\"officeName\":\"Self Help Programme\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":131,\"firstname\":\"Mary\",\"lastname\":\"Nyambura\",\"displayName\":\"Nyambura, Mary\",\"officeId\":58,\"officeName\":\"Self Help Programme\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":476,\"firstname\":\"Abel\",\"lastname\":\"Nyarang\\u0027o\",\"displayName\":\"Nyarang\\u0027o, Abel\",\"officeId\":1,\"officeName\":\"Head Office\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":511,\"firstname\":\"George\",\"lastname\":\"Okello\",\"displayName\":\"Okello, George\",\"officeId\":58,\"officeName\":\"Self Help Programme\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":136,\"firstname\":\"Abel\",\"lastname\":\"Omariba\",\"displayName\":\"Omariba, Abel\",\"officeId\":1,\"officeName\":\"Head Office\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":349,\"firstname\":\"SHP\",\"lastname\":\"Operations\",\"displayName\":\"Operations, SHP\",\"officeId\":1,\"officeName\":\"Head Office\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":161,\"firstname\":\"conflux\",\"lastname\":\"support\",\"displayName\":\"support, conflux\",\"officeId\":1,\"officeName\":\"Head Office\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":225,\"firstname\":\"system\",\"lastname\":\"system\",\"displayName\":\"system, system\",\"officeId\":1,\"officeName\":\"Head Office\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":150,\"firstname\":\"user\",\"lastname\":\"user\",\"displayName\":\"user, user\",\"officeId\":1,\"officeName\":\"Head Office\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":130,\"firstname\":\"Lucas\",\"lastname\":\"Wachu\",\"displayName\":\"Wachu, Lucas\",\"officeId\":58,\"officeName\":\"Self Help Programme\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":492,\"firstname\":\"Virginia\",\"lastname\":\"Waitherero\",\"displayName\":\"Waitherero, Virginia\",\"officeId\":1,\"officeName\":\"Head Office\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":510,\"firstname\":\"Martha\",\"lastname\":\"Wamuyu\",\"displayName\":\"Wamuyu, Martha\",\"officeId\":58,\"officeName\":\"Self Help Programme\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":133,\"firstname\":\"Margaret\",\"lastname\":\"Wanja\",\"displayName\":\"Wanja, Margaret\",\"officeId\":58,\"officeName\":\"Self Help Programme\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":198,\"firstname\":\"Nasimiyu\",\"lastname\":\"Wanjala\",\"displayName\":\"Wanjala, Nasimiyu\",\"officeId\":58,\"officeName\":\"Self Help Programme\",\"isLoanOfficer\":false,\"isActive\":true},{\"id\":923,\"firstname\":\"Mark\",\"lastname\":\"Waweru\",\"displayName\":\"Waweru, Mark\",\"mobileNo\":\"0710866522\",\"officeId\":58,\"officeName\":\"Self Help Programme\",\"isLoanOfficer\":true,\"isActive\":true,\"joiningDate\":[2021,1,1]},{\"id\":468,\"firstname\":\"Lilian\",\"lastname\":\"Waweru\",\"displayName\":\"Waweru, Lilian\",\"officeId\":58,\"officeName\":\"Self Help Programme\",\"isLoanOfficer\":false,\"isActive\":true}],\"savingProductOptions\":[{\"id\":378,\"name\":\"Liquidation Account\",\"withdrawalFeeForTransfers\":false,\"allowOverdraft\":false,\"enforceMinRequiredBalance\":false,\"withHoldTax\":false,\"releaseguarantor\":false},{\"id\":387,\"name\":\"Benevolent Fund\",\"withdrawalFeeForTransfers\":false,\"allowOverdraft\":false,\"enforceMinRequiredBalance\":false,\"withHoldTax\":false,\"releaseguarantor\":false},{\"id\":393,\"name\":\"Charges and Penalties\",\"withdrawalFeeForTransfers\":false,\"allowOverdraft\":false,\"enforceMinRequiredBalance\":false,\"withHoldTax\":false,\"releaseguarantor\":false},{\"id\":397,\"name\":\"Minor Savings\",\"withdrawalFeeForTransfers\":false,\"allowOverdraft\":false,\"enforceMinRequiredBalance\":false,\"withHoldTax\":false,\"releaseguarantor\":false}],\"genderOptions\":[{\"id\":33,\"name\":\"Male\",\"position\":1,\"description\":\"\",\"active\":true,\"mandatory\":false},{\"id\":35,\"name\":\"Female\",\"position\":2,\"description\":\"\",\"active\":true,\"mandatory\":false}],\"clientTypeOptions\":[{\"id\":30,\"name\":\"Member\",\"position\":1,\"description\":\"\",\"active\":true,\"mandatory\":false},{\"id\":51,\"name\":\"Minor\",\"position\":2,\"description\":\"\",\"active\":true,\"mandatory\":false},{\"id\":52,\"name\":\"Corporate\",\"position\":3,\"description\":\"\",\"active\":true,\"mandatory\":false},{\"id\":155,\"name\":\"SHG Official\",\"position\":4,\"description\":\"\",\"active\":true,\"mandatory\":false},{\"id\":156,\"name\":\"Catholic Church\",\"position\":5,\"description\":\"\",\"active\":true,\"mandatory\":false},{\"id\":157,\"name\":\"ADN Secretariat\",\"position\":6,\"description\":\"\",\"active\":true,\"mandatory\":false},{\"id\":159,\"name\":\"Parish Employee\",\"position\":7,\"description\":\"\",\"active\":true,\"mandatory\":false},{\"id\":160,\"name\":\"Church Group\",\"position\":8,\"description\":\"\",\"active\":true,\"mandatory\":false},{\"id\":161,\"name\":\"ADN Clergy\",\"position\":9,\"description\":\"\",\"active\":true,\"mandatory\":false}],\"clientClassificationOptions\":[{\"id\":31,\"name\":\"Catholic\",\"position\":1,\"description\":\"\",\"active\":true,\"mandatory\":false},{\"id\":32,\"name\":\"Non Catholic\",\"position\":2,\"description\":\"\",\"active\":true,\"mandatory\":false}],\"clientNonPersonConstitutionOptions\":[{\"id\":116,\"name\":\"GOVT REGISTERED\",\"position\":1,\"description\":\"\",\"active\":true,\"mandatory\":false},{\"id\":117,\"name\":\"INFORMAL\",\"position\":2,\"description\":\"\",\"active\":true,\"mandatory\":false},{\"id\":118,\"name\":\"CHURCH GROUP\",\"position\":3,\"description\":\"\",\"active\":true,\"mandatory\":false}],\"clientNonPersonMainBusinessLineOptions\":[],\"clientLegalFormOptions\":[{\"id\":1,\"code\":\"legalFormType.person\",\"value\":\"PERSON\"},{\"id\":2,\"code\":\"legalFormType.entity\",\"value\":\"ENTITY\"}],\"familyMemberOptions\":{\"relationshipIdOptions\":[{\"id\":83,\"name\":\"Father\",\"position\":0,\"active\":true,\"mandatory\":false},{\"id\":84,\"name\":\"Spouse\",\"position\":0,\"active\":true,\"mandatory\":false},{\"id\":85,\"name\":\"father-in-law\",\"position\":0,\"active\":true,\"mandatory\":false},{\"id\":91,\"name\":\"Wife\",\"position\":1,\"active\":true,\"mandatory\":false},{\"id\":109,\"name\":\"Father In Law\",\"position\":1,\"active\":true,\"mandatory\":false},{\"id\":88,\"name\":\"Husband\",\"position\":1,\"active\":true,\"mandatory\":false},{\"id\":92,\"name\":\"Brother\",\"position\":1,\"active\":true,\"mandatory\":false},{\"id\":87,\"name\":\"Mother\",\"position\":1,\"active\":true,\"mandatory\":false},{\"id\":94,\"name\":\"Brother in law\",\"position\":1,\"active\":true,\"mandatory\":false},{\"id\":93,\"name\":\"Mother in law\",\"position\":1,\"active\":true,\"mandatory\":false},{\"id\":90,\"name\":\"Daughter\",\"position\":1,\"active\":true,\"mandatory\":false},{\"id\":96,\"name\":\"Other\",\"position\":1,\"active\":true,\"mandatory\":false},{\"id\":95,\"name\":\"Daughter in law\",\"position\":1,\"active\":true,\"mandatory\":false},{\"id\":89,\"name\":\"Son\",\"position\":1,\"active\":true,\"mandatory\":false}],\"genderIdOptions\":[{\"id\":33,\"name\":\"Male\",\"position\":1,\"description\":\"\",\"active\":true,\"mandatory\":false},{\"id\":35,\"name\":\"Female\",\"position\":2,\"description\":\"\",\"active\":true,\"mandatory\":false}],\"maritalStatusIdOptions\":[{\"id\":170,\"name\":\"Married\",\"position\":1,\"description\":\"\",\"active\":true,\"mandatory\":false},{\"id\":171,\"name\":\"Single\",\"position\":2,\"description\":\"\",\"active\":true,\"mandatory\":false},{\"id\":172,\"name\":\"Widow\",\"position\":3,\"description\":\"\",\"active\":true,\"mandatory\":false},{\"id\":173,\"name\":\"Others\",\"position\":4,\"description\":\"\",\"active\":true,\"mandatory\":false}],\"professionIdOptions\":[]},\"address\":[null],\"isAddressEnabled\":false}"
}